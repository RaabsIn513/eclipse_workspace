package senior.project;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class Integer_Chooser_Activity extends Activity{
	
	private static int crementBy = 1;
	private static String nameReq = null;
	private static int value = 0;
	private static int Max = 9999;
	private static int Min = -9999;
	private static String byList = null;
	private static int[] intList = null;
	private static String[] strList = null;
	private static int listIndex = 0;
	
	@Override
	public void onCreate(Bundle savedInstanceState){
	    super.onCreate(savedInstanceState);
	    setContentView(R.layout.integer_chooser);
	    
	    // incoming values
	    try{
	    	nameReq	  = this.getIntent().getExtras().getString("NAME");
		    crementBy = this.getIntent().getExtras().getInt("CREMENT_BY");
		    value     = this.getIntent().getExtras().getInt("ORIGINAL");
		    Max       = this.getIntent().getExtras().getInt("MAX_VALUE");
		    Min       = this.getIntent().getExtras().getInt("MIN_VALUE");
		    byList	  = this.getIntent().getExtras().getString("INTLIST");
	    
		    if( byList != null )
		    {
		    	strList = byList.split(",");
		    	intList = new int[strList.length];
		    	for( int i = 0; i < intList.length; i++)
		    	{
		    		intList[i] = Integer.valueOf(strList[i]);
		    	}
		    }
	    }
	    catch(Exception ex)
	    {}
	    
	    Button UP = (Button) findViewById(R.id.btn_numUp);
	    Button DN = (Button) findViewById(R.id.btn_numDn);

	    UP.setOnClickListener(new OnClickListener(){
	    	public void onClick(View v)
	    	{
	    		if( byList != null && (listIndex >= 0) && (listIndex) < (strList.length) )
	    		{
	    			listIndex++;
	    			value = intList[listIndex];
	    		}
	    		else
	    		{
	    		if( value < Max )
	    			value = value + crementBy;
	    		}
	    	}
	    });

	    DN.setOnClickListener(new OnClickListener(){
	    	public void onClick(View v)
	    	{	
	    		if( byList != null && (listIndex > 0) && (listIndex) <= (strList.length) )
	    		{
	    			listIndex--;
	    			value = intList[listIndex];
	    		}
	    		else
	    		{
	    		if( value > Min )
	    			value = value - crementBy;
	    		}
	    	}
	    });
	}

    @Override
    public void onBackPressed() {
    	Intent retData = new Intent();
		
		retData.putExtra("VALUE", value);
		retData.putExtra("NAME", nameReq);
		
		setResult( Activity.RESULT_OK, retData );	// set the result/data
		finish();									// return to previous activity
    return;
    }
}
