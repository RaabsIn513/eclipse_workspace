package senior.project;

import android.app.Activity;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.widget.Toast;

public class Send_SMS_Activity extends Activity {
	
	private static String SAS_Settings = "SAS_SettingsFile";
	private static SharedPreferences SettingsFile;
	private static int AMP_HISTORY_SIZE;
	private static int THRESH_SAMPS;
	private static int THRESH_CNT;
	private static int THRESH_DIFF;
	private static int SAMP_HISTORY_SIZE;
	private static int SAMPLE_RATE;
	private static Context parentContext; 
	
	private boolean sendAlertSMS( String[] info )
	{
		String[] message = new String[info.length + 5];
	    try{
	    	// Get some background info that will always be sent. 
		    SettingsFile = getSharedPreferences(SAS_Settings, 0);
		    AMP_HISTORY_SIZE = Integer.valueOf(SettingsFile.getInt("AMP_HISTORY_SIZE", 64));
		    THRESH_SAMPS = Integer.valueOf(SettingsFile.getInt("THRESH_SAMPS", 20));
		    THRESH_DIFF = Integer.valueOf(SettingsFile.getInt("THRESH_DIFF", 20));
		    SAMP_HISTORY_SIZE = Integer.valueOf(SettingsFile.getInt("SAMP_HISTORY_SIZE", 64));
		    SAMPLE_RATE = Integer.valueOf(SettingsFile.getInt("SAMP_HISTORY_SIZE", 8000));
		 
			message[0] = "AMP_HISTORY_SIZE: " + AMP_HISTORY_SIZE;
			message[1] = "THRESH_SAMPS: " + THRESH_SAMPS;
			message[2] = "THRESH_DIFF: " + THRESH_DIFF;
			message[3] = "SAMP_HISTORY_SIZE: " + SAMP_HISTORY_SIZE;
			message[4] = "SAMPLE_RATE: " + SAMPLE_RATE;
		   	
		    for( int i = 5; i < message.length; i++ )
		    	message[i] = info[i-5];
		    
		    return true;
		    
		    
	    }
	    catch( Exception ex )
	    {
	    	ex.getMessage();
	    	
	    	return false;
	    }
	}
	
	//---sends an SMS message to another device---
    @SuppressWarnings("deprecation")
    private boolean sendSMS( String phoneNumber, String message )
    {       
        PendingIntent pi = PendingIntent.getActivity(this, 0,
            new Intent(this, Send_SMS_Activity.class), 0);                
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, pi, null);        
        
        return true;
    }  
    
	public boolean sendSMS( String TXTmessage, String[] recipients )
	{
		for( int i = 0; i < recipients.length; i++ )
			sendSMS( recipients[i], TXTmessage );
		
		return true;
	}
	
	public boolean sendSMS( String[] TXTmessage, String[] recipients )
	{
		String message = null;
		for( int i = 0; i < TXTmessage.length; i++ )
			
		for( int i = 0; i < recipients.length; i++ )
			sendSMS( recipients[i], TXTmessage );
		
		return true;
	}
	
	@Override
	public void onCreate(Bundle savedInstanceState){
	    super.onCreate(savedInstanceState);
	   // setContentView(R.layout.main_operational);
	   
	}
	


}
